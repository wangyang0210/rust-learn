# 前言

新 Rust 开发者通常会因三个原因而在字符串上遇到困难：Rust 倾向于暴露可能的错误、字符串作为一种数据结构比许多程序员认为的要复杂，以及 UTF-8。这些因素结合在一起，可能会让你在从其他编程语言转换过来时觉得困难。

我们将字符串作为集合来讨论，因为字符串被实现为一个字节集合，加上一些方法，以便在将这些字节解释为文本时提供有用的功能。在本节中，我们将讨论每个集合类型都有的 String 操作，例如创建、更新和读取。我们还将讨论 String 与其他集合的不同之处，即索引到 String 的复杂性，这是由于人和计算机解释 String 数据的方式不同。


# 内容

我们首先定义我们所说的字符串术语。Rust 在核心语言中只有一个字符串类型，即通常以借用形式 `&str `出现的字符串切片 `str`。在前面的章节中，我们讨论了字符串切片，它们是对存储在其他地方的某些`UTF-8` 编码字符串数据的引用。例如，字符串字面量存储在程序的二进制文件中，因此它们是字符串切片。

String 类型由 Rust 的标准库提供，而不是编码在核心语言中，是一个可增长的、可变的、拥有的 UTF-8 编码字符串类型。当 Rust 开发者提到“字符串”时，他们可能指的是 `String` 或 `&str` 类型，而不仅仅是其中一种类型。尽管本节主要讨论 `String`，但这两种类型在 Rust 的标准库中都被大量使用，并且两者都是 UTF-8 编码的。



## 创建字符串

许多与 Vec<T> 可用的操作也可用于 String，因为 String 实际上是包装在一个字节数组周围的，并具有一些额外的保证、限制和功能。一个与 Vec<T> 和 String 工作方式相同的函数示例是 new 函数，用于创建实例

`Vec<T>` 中可用的许多相同操作也可用于 `String`，因为 `String` 实际上是作为字节向量的包装器实现的，具有一些额外的保证、限制和功能。与 `Vec<T>` 和 `String` 一起工作方式相同的函数的一个例子是`new`函数，用于创建实例。

```rust
fn main() {
    let mut s = String::new();
}
```

这行代码创建了一个名为`s` 的新空字符串，然后我们可以将数据加载到其中。通常，我们会有一些初始数据来启动字符串。为此，我们使用 `to_string` 方法，该方法可用于实现 Display 特征的任何类型，字符串字面量也是如此。

```rust
fn main() {
    let data = "initial contents";

    let s = data.to_string();

    // the method also works on a literal directly:
    let s = "initial contents".to_string();
}
```

